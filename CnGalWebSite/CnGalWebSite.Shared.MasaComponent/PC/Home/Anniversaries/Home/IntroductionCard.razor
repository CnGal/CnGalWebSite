@inject IDataCacheService _dataCatcheService
@inject IPageModelCatche<List<EntryInforTipViewModel>> _pageModelCatche

<MRow>
    @foreach (var item in _items)
    {
        <MCol Cols="6" Sm="4"  Lg="3" Xl="2" Class="mb-4">
            <MDCard Href="@($"/entries/index/{item.Id}")" Class="h-100 anniversaries-group-card">
                <img src="@item.MainImage" alt="@item.Name" loading="lazy"/>
                <div class="content-card">
                    <div class="name">
                        @item.Name
                    </div>
                    <div class="text-truncate-2 biref">
                        @item.BriefIntroduction
                    </div>
                </div>
            </MDCard>
        </MCol>
    }
</MRow>

@code {

    List<EntryInforTipViewModel> _items { get; set; } = new List<EntryInforTipViewModel>();

    [CascadingParameter]
    public ErrorHandler ErrorHandler { get; set; }

    protected override async Task OnInitializedAsync()
    {
        try
        {
            //获取主页信息
            _items = await _pageModelCatche.GetCache("api/anniversaries/GetGroupList");
        }
        catch (Exception ex)
        {
            await ErrorHandler.ProcessError(ex, "获取周年庆参与制作组列表失败");
        }

    }

}
