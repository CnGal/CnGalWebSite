@inject NavigationManager NavigationManager
@inject IUserService _userService

<AuthorizeView>
    <Authorized>
        <CreateObjectButton Class="mr-2" />
        <CnGalWebSite.Components.Buttons.MasaButton Tooltip="任务" Icon="@IconType.Task.ToIconString()" Class="mr-2" Href="/tasks" />
        <CnGalWebSite.Components.Buttons.MasaButton Icon="mdi-cog" Class="me-2" Tooltip="设置" OnClick="OnOpenSetting" StopPropagation />
        <UserButton Class="me-4" OnClickSetting="OnOpenSetting" />
    </Authorized>
    <NotAuthorized>
        <CnGalWebSite.Components.Buttons.MasaButton Icon="mdi-login" Class="mr-2" Tooltip="登入" OnClick="_userService.Login" />
        <CnGalWebSite.Components.Buttons.MasaButton Icon="mdi-cog" Class="me-2" Tooltip="设置" OnClick="OnOpenSetting" StopPropagation />
    </NotAuthorized>
</AuthorizeView>
@if (isOpen)
{
    <ThemeSettingCard @ref="themeSettingCard" />
}
@code {
    ThemeSettingCard themeSettingCard;
    bool isOpen;


    public void OnOpenSetting()
    {
        isOpen = true;
        StateHasChanged();
        if (themeSettingCard != null)
        {
            themeSettingCard.Refresh(true);
        }
    }
}
