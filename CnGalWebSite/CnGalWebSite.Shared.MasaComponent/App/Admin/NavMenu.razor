@inject NavigationManager NavigationManager
@inject IHttpService _httpService
@inject IDataCacheService _dataCacheService


<MNavigationDrawer  @bind-Value="Drawer"  App Temporary>
    <MList Nav Class="mt-4"
           Dense>
        <AuthorizeView>
            <Authorized>
                <CnGalWebSite.Shared.MasaComponent.App.Layout.UserButton OnClosed="OnClose" OnRefresh="OnRefresh" Admin/>
            </Authorized>
            <NotAuthorized>
                <CnGalWebSite.Shared.MasaComponent.App.Layout.LoginButton />
                <CnGalWebSite.Shared.MasaComponent.Shared.Components.MasaDivider />
                <MButton Text Block  Left OnClick="OnRefresh">
                    <MIcon Left>mdi-home</MIcon>
                    主页
                </MButton>
                <CnGalWebSite.Shared.MasaComponent.Shared.Components.MasaDivider />
            </NotAuthorized>
        </AuthorizeView>
    </MList>
    <CnGalWebSite.Shared.MasaComponent.PC.Admin.LeftMenu />
</MNavigationDrawer>

@code {
    [Parameter]
    public bool Drawer { get; set; }
    [Parameter]
    public EventCallback OnRefresh { get; set; }

    bool isOpen;

    public void SetDrawer(bool drawer)
    {
        Drawer = drawer;
        StateHasChanged();
        
    }
    private void OnClickUrl(string url)
    {
        NavigationManager.NavigateTo(url);
        Drawer = false;
        StateHasChanged();
        
    }

    private void OnClose()
    {
        Drawer = false;
        StateHasChanged();
        
    }


}
