@page "/"
@using CnGalWebSite.Shared
@using CnGalWebSite.Shared.Component.Home
@using CnGalWebSite.DataModel.ViewModel.OperationRecords
@using Microsoft.AspNetCore.Authentication
@using CnGalWebSite.Server.Extensions

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
    var ip = Request.Headers["X-Forwarded-For"].FirstOrDefault();
    if (string.IsNullOrWhiteSpace(ip))
    {
        ip = Request.HttpContext.Connection.RemoteIpAddress.MapToIPv4().ToString();
    }
    var connectionInfo = new ConnectionInfo()
    {
        RemoteIpAddress = ip
    };

    var mobile = HttpContext.Request.IsMobileBrowser();
}

<component type="typeof(App)" render-mode="ServerPrerendered" param-ConnectionInfo="connectionInfo" param-Mobile="mobile"/>
