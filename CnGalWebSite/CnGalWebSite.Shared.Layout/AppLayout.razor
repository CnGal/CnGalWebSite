@inherits LayoutComponentBase
@inject IDataCacheService _dataCacheService
@inject NavigationManager NavigationManager


<MAppBar App Style="background-color: var(--md-sys-color-background)!important;" Dense>
    <MAppBarNavIcon @onclick="@(()=>SetDrawer())"></MAppBarNavIcon>

    <CnGalWebSite.Shared.MasaComponent.App.Layout.TitleCard  />
    <MSpacer></MSpacer>

    <MButton Icon Href="/search">
        <MIcon>mdi-magnify</MIcon>
    </MButton>
</MAppBar>
<CnGalWebSite.Shared.MasaComponent.App.Layout.NavButton Drawer="drawer" @ref="navButton" />

<MMain Class="pb-0">
    <CascadingValue Value="this" IsFixed="true">
            <CnGalWebSite.Shared.MasaComponent.Shared.Components.MasaContainer>
             <ErrorHandler ShowDetailedErrorInfor="_dataCacheService.ThemeSetting.ShowDetailedErrorInfor" IsSSR="ToolHelper.IsSSR">
                    @Body
                </ErrorHandler>

            </CnGalWebSite.Shared.MasaComponent.Shared.Components.MasaContainer>
    </CascadingValue>
</MMain>
<CnGalWebSite.Shared.MasaComponent.Shared.Tips.SynchronousAuthStateCard />

@code {
    bool drawer { get; set; }
    CnGalWebSite.Shared.MasaComponent.App.Layout.NavButton navButton;

    public void SetDrawer()
    {
        if (navButton != null)
        {
            navButton.SetDrawer(true);
        }
    }
}
