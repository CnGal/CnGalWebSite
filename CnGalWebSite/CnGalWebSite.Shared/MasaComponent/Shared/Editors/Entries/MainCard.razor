@using CnGalWebSite.Shared.MasaComponent.Shared.Buttons

<CnGalWebSite.Shared.MasaComponent.Shared.Components.MasaTitleContainer Icon="fa fa-fw fa-home" Title="主要信息" Class="@Class"  Collapable>
    <ValidateForm Model="@Model">
            <div class="row mb-4">
                <div class="form-group col-12 col-md-6  col-lg-3 mt-2">
                    <CnGalWebSite.Shared.MasaComponent.Shared.Editors.Buttons.ImageUploadButton @bind-ImagePath="@Model.MainPicture" ShowCropper
                                                                                   Type="@(Model.Type is EntryType.Game or EntryType.ProductionGroup?ImageAspectType._16_9:ImageAspectType.None)"
                                                                                   Text="上传主图"/>
                </div>
                <div class="form-group col-12 col-md-6  col-lg-3 mt-2">
                    <CnGalWebSite.Shared.MasaComponent.Shared.Editors.Buttons.ImageUploadButton @bind-ImagePath="@Model.Thumbnail" Type="ImageAspectType._1_1" ShowCropper
                                                                                   Text="@(Model.Type== EntryType.Staff?"上传头像":"上传缩略图")"/>
                </div>
                <div class="form-group col-12 col-md-6  col-lg-3 mt-2">
                    <CnGalWebSite.Shared.MasaComponent.Shared.Editors.Buttons.ImageUploadButton @bind-ImagePath="@Model.BackgroundPicture"  Type="ImageAspectType.None" Text="上传大背景"/>
                </div>
                <div class="form-group col-12 col-md-6  col-lg-3 mt-2">
                    <CnGalWebSite.Shared.MasaComponent.Shared.Editors.Buttons.ImageUploadButton @bind-ImagePath="@Model.SmallBackgroundPicture"  Type="ImageAspectType.None" Text="上传小背景"/>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-12  col-sm-6">
                    <Select TValue="EntryType" Value="Model.Type" ValueChanged="OnTypeChanged" ShowLabel="true" DisplayText="类型"></Select>
                </div>

                <CnGalWebSite.Shared.MasaComponent.Shared.Editors.Cards.DisplayNameCard @bind-Name="Model.Name" @bind-DisplayName="Model.DisplayName" Class="form-group col-12 col-sm-6" />

                <div class="form-group col-12  col-sm-6">
                    <BootstrapInput @bind-Value="Model.AnotherName" />
                </div>
                <div class="form-group col-12  col-sm-6">
                    <Select TValue="EntryStyleTemplate" @bind-Value="Model.Template" ShowLabel="true" DisplayText="样式模板"></Select>
                </div>

                <div class="form-group col-12">
                    <Textarea @bind-Value="Model.BriefIntroduction" rows="3" />
                </div>
            </div>
    </ValidateForm>

</CnGalWebSite.Shared.MasaComponent.Shared.Components.MasaTitleContainer>

@code {
    [Parameter]
    public EditMainViewModel Model { get; set; }
    [Parameter]
    public string Class { get; set; }
    [Parameter]
    public EventCallback<EntryType> TypeChanged { get; set; }

    public async Task OnTypeChanged(EntryType type)
    {
        Model.Type = type;
        await TypeChanged.InvokeAsync(type);
    }

}
