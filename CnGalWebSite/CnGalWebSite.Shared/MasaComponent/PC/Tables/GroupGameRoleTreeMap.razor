@inject HttpClient Http

<div class="h-100">
    @if (isReady)
    {
        <MECharts Option="Model" MinWidth="@("100%")" MinHeight="1000" Height="1000">
        </MECharts>
    }
    else
    {
        <div style="height:300px">
            <CnGalWebSite.Shared.AppComponent.Normal.Loading.LoadingTip Height="100%" />
        </div>
    }

</div>
@code {
    [CascadingParameter]
    public ErrorHandler ErrorHandler { get; set; }

    bool isReady;
    EChartsTreeMapOptionModel Model;
    protected override async Task OnInitializedAsync()
    {
        try
        {
            Model = await Http.GetFromJsonAsync<EChartsTreeMapOptionModel>(ToolHelper.WebApiPath + "api/tables/GetGroupGameRoleTreeMap");
            isReady = true;
        }
        catch (Exception ex)
        {
            ErrorHandler.ProcessError(ex, "无法获取 制作组->游戏->角色 矩形树图");
        }
    }
}
