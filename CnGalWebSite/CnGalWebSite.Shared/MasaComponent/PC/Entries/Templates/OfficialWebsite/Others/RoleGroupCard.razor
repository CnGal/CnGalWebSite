@inject ImagesLargeViewService ImagesLargeViewService
@inject IDataCacheService _dataCatcheService
@inject IEventService _eventService


<div class="character-list">
    <MSlideGroup @bind-Value="Index" ShowArrows="true" CenterActive Mandatory>
        @foreach (var item in Model)
        {
            <MSlideItem>
                <MCard  Class="ma-4"
                       OnClick="@context.Toggle"
                       RefBack="@context.Ref">
                    <img src="@item.MainImage" class="character-icon"/>
                </MCard>
            </MSlideItem>
        }
    </MSlideGroup>
    <div>

        <MWindow @bind-Value="Index" Reverse>
            <ChildContent>
                @foreach (var item in Model)
                {
                    <MWindowItem Value="@Model.IndexOf(item)">
                        <RoleCard Model="item" />
                    </MWindowItem>
                }
            </ChildContent>
          
        </MWindow>
    </div>
</div>

@code {
    private StringNumber Index { get; set; } = 0;

    [Parameter]
    public List<EntryRoleViewModel> Model { get; set; }

    public void ClickNext()
    {
        Index = (Index.ToInt32() + 1) % Model.Count;
    }
    public void ClickPrev()
    {
        Index = Index.ToInt32() == 1 ? Model.Count - 1 : Index.ToInt32() - 1;
    }
}
